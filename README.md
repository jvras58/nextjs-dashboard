# Dashboard Afiliados Betinha

## üìñ Sobre o Projeto

O **Dashboard Afiliados Betinha** √© uma aplica√ß√£o web desenvolvida para an√°lise de dados relacionados aos afiliados da plataforma **Betinha**. Atrav√©s de uma interface limpa e din√¢mica, o dashboard permite a visualiza√ß√£o e intera√ß√£o com m√©tricas e relat√≥rios espec√≠ficos de cada afiliado.

Este projeto √© um dashboard desenvolvido com Next.JS, inspirado no Google Data Studio. O objetivo √© criar uma aplica√ß√£o r√°pida e eficiente, superando as limita√ß√µes de desempenho do Google Data Studio.

## Link de Refer√™ncia

[Google Data Studio](https://lookerstudio.google.com/u/0/reporting/bf4f21cf-438e-4ba6-baf8-53daa70d2e57/page/tUbQE)

## Problema

O Google Data Studio pode ser lento e √†s vezes trava, ent√£o a velocidade √© essencial para este projeto.

## üöÄ Tecnologias e Ferramentas

Este projeto foi desenvolvido utilizando **Next.js** com **shadcn/UI** para componentiza√ß√£o e **Firebase** para armazenamento e gerenciamento de dados.

### Stack do Projeto

Este projeto √© uma aplica√ß√£o web que utiliza **Next.js**, um framework React focado em renderiza√ß√£o do lado servidor e funcionalidades modernas de desenvolvimento web. O Firebase √© utilizado para gerenciar dados dos afiliados, enquanto o frontend fornece uma navega√ß√£o fluida entre as diferentes p√°ginas e dashboards.

As tecnologias utilizadas s√£o:

| **Tecnologia**        | **Vers√£o**       |
|-----------------------|------------------|
| **Runtime**           |                  |
| Node.js               | v18.x.x          |
| **Framework**         |                  |
| Next.js               | v13.x.x          |
| **Banco de Dados**    |                  |
| Firebase              | v9.x.x           |
| **Devtime**           |                  |
| npm                   | v9.x.x           |

### Organiza√ß√£o do Projeto
```
/
‚îú‚îÄüìÅ public            ->  [Pagina para imagens e icons e arquivos csv]
‚îú‚îÄüìÅ src               ->  [Implementa√ß√£o da aplica√ß√£o]
‚îÇ ‚îú‚îÄüìÅ app           ->  [Entrypoint]
‚îÇ ‚îÇ ‚îú‚îÄüìÅ api
‚îÇ ‚îÇ ‚îÇ  ‚îú‚îÄüìÅ sheets  ->  [Api Router sheets]
‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îú‚îÄ‚öõ route.ts
| | |  
‚îÇ ‚îÇ ‚îú‚îÄüìÅ dashboard
‚îÇ ‚îÇ ‚îÇ  ‚îú‚îÄüìÅ [slug]  ->  [Router dinamica do dashboard]
‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îú‚îÄ‚öõ page.tsx
| | |  | 
‚îÇ ‚îÇ |  ‚îú‚îÄ‚öõ page.tsx -> [Router base com os cards dos afiliados]
| | |  
‚îÇ ‚îÇ ‚îú‚îÄüìÅ campanha 
‚îÇ ‚îÇ |  ‚îú‚îÄ‚öõ page.tsx -> [page com sistema de gera√ß√£o de links]
| | |  
‚îÇ ‚îÇ ‚ú® favicon.ico
‚îÇ ‚îÇ ‚öõ  page.tsx         ->  [P√°ginas de entrada [que chama o component de dashboard]] 
‚îÇ ‚îÇ 
‚îÇ ‚îú‚îÄüìÅ components        ->  [components proprios]
‚îÇ ‚îÇ ‚îú‚îÄüìÅ xxxxxxx
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚öõ xxxxx.tsx
‚îÇ ‚îÇ | 
‚îÇ ‚îÇ ‚îú‚îÄüìÅ ui              ->  [components UI]
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚öõ xxxxx.tsx
‚îÇ ‚îÇ |
‚îÇ ‚îú‚îÄüìÅ css              ->  []
‚îÇ ‚îÇ  ‚îú‚îÄüñåÔ∏è style.css
‚îÇ ‚îÇ  ‚îú‚îÄüñåÔ∏è satoshi.css
‚îÇ ‚îÇ  
‚îÇ ‚îú‚îÄüìÅ Config         ->  [configura√ß√£o de conex√µes]
‚îÇ ‚îÇ  ‚îú‚îÄ‚öõ firebaseConfig.ts
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄüìÅ fonts         ->  [fonts do front]
‚îÇ ‚îÇ  ‚îú‚îÄ ùìê xxxxx-xxx.eot
‚îÇ ‚îÇ  ‚îú‚îÄ ùìê xxxxx-xxx.tft
‚îÇ ‚îÇ  ‚îú‚îÄ ùìê xxxxx-xxx.wolf
‚îÇ ‚îÇ     ...
‚îÇ ‚îú‚îÄüìÅ hooks         ->  []
‚îÇ ‚îÇ  ‚îú‚îÄ‚öõ useXXXX.tsx
‚îÇ ‚îÇ      ...
‚îÇ ‚îú‚îÄüìÅ lib         ->  []
‚îÇ ‚îÇ  ‚îú‚îÄüáπ utils.ts
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄüìÅ service         ->  [Servicos utilizados]
‚îÇ ‚îÇ  ‚îú‚îÄ üìÅ google
‚îÇ ‚îÇ  |   ‚îú‚îÄüáπ sheets.ts
| |  |   ‚îú‚îÄüáπ xxxxxxx.ts
‚îÇ ‚îÇ  ‚îú‚îÄ üìÅ firestore
| |  |   ‚îú‚îÄüáπ xxxxxxx.ts
| |
‚îÇ ‚îú‚îÄüìÅ types         ->  [tipagem para o typescript]
‚îÇ ‚îÇ  ‚îú‚îÄüáπ xxxx.ts
‚îÇ ‚îÇ      ...
‚îÇ .env-semple
‚îÇ .eslintrc.json
‚îÇ ùìü .prettierrc
| {} components.json ->  [configura√ß√£o do shadcn/UI]
| üáπ jsvectormap.d.ts
| üáπ next-env.d.ts
| üáπ next-env.d.ts
| ùìù  next.config.mjs
| üáπ tailwind.config.ts
| {} tsconfig.json
‚îú‚îÄüìÑ .gitignore
‚îú‚îÄüáØ‚Äåüá∏‚Äå package.json    ->  Defini√ß√µes para o projeto
‚îú‚îÄüìÑ README.MD
```

## ‚öôÔ∏è Instala√ß√£o e Configura√ß√£o

Para rodar o projeto localmente, siga os passos abaixo:

1. Clone o reposit√≥rio:

   ```bash
   git clone https://github.com/usuario/nextjs-dashboard.git
   cd nextjs-dashboard
   ```

2. Instale as depend√™ncias:

   ```bash
   npm install
   ```

3. Configure o arquivo `.env` na raiz do projeto com suas credenciais:

   1. `.env`
      ```bash
      <!-- Firebase Conex√£o -->
      NEXT_PUBLIC_API_KEY=your_api_key
      NEXT_PUBLIC_AUTH_DOMAIN=your_auth_domain
      NEXT_PUBLIC_PROJECT_ID=your_project_id
      NEXT_PUBLIC_STORAGE_BUCKET=your_storage_bucket
      NEXT_PUBLIC_MESSAGING_SENDER_ID=your_messaging_sender_id
      NEXT_PUBLIC_APP_ID=your_app_id
      NEXT_PUBLIC_MEASUREMENT_ID=your_measurement_id

      <!-- Google Api conex√£o -->
      NEXT_PUBLIC_GOOGLE_SHEETS_TYPE="service_account"
      NEXT_PUBLIC_GOOGLE_SHEETS_PROJECT_ID="xxxxxxxxxxxxx"
      NEXT_PUBLIC_GOOGLE_SHEETS_PRIVATE_KEY_ID="xxxxxxxxxxxxxx"
      NEXT_PUBLIC_GOOGLE_SHEETS_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nxxxxxxxxxx\n-----END PRIVATE KEY-----\n"
      NEXT_PUBLIC_GOOGLE_SHEETS_CLIENT_EMAIL="xxxxxx@xxxxxxx.iam.gserviceaccount.com"
      NEXT_PUBLIC_GOOGLE_SHEETS_CLIENT_ID="xxxxxxxxxxxxxx"
      NEXT_PUBLIC_GOOGLE_SHEETS_AUTH_URI="https://accounts.google.com/o/oauth2/auth"
      NEXT_PUBLIC_GOOGLE_SHEETS_TOKEN_URI="https://oauth2.googleapis.com/token"
      NEXT_PUBLIC_GOOGLE_SHEETS_AUTH_PROVIDER_CERT_URL="https://www.googleapis.com/oauth2/v1/certs"
      NEXT_PUBLIC_GOOGLE_SHEETS_CLIENT_CERT_URL="https://www.googleapis.com/robot/v1/metadata/x509/testing-spreadsheets%40betinha-testing.iam.gserviceaccount.com"

      <!-- Google Planilha code -->
      <!--  id da planilha: -->
      NEXT_PUBLIC_GOOGLE_SHEETS_SPREADSHEET_ID="xxxxxxxxxxxxxxxxxx"
      <!--  id da pagina opera√ß√µes: -->
      NEXT_PUBLIC_GOOGLE_SHEETS_OPERATIONS_SHEET_ID="x"
      <!--  id da pagina de Estados: -->
      NEXT_PUBLIC_GOOGLE_SHEETS_STATES_SHEET_ID="x"

      <!--  NEXTAUTH CONFIG -->
      NEXTAUTH_URL=http://localhost:3000
      NEXTAUTH_SECRET=xxxxx

      <!-- Password Seed -->
      NAME_STRING="xxxxxxx"
      EMAIL_STRING="xxxx@exemple.com"  
      ADMIN_PASSWORD="xxxx@"
      ```

4. Execute as migra√ß√µes do banco de dados utilizando o Prisma:
   ```bash
   npm run migrate
   ```
   > Isso aplicar√° todas as altera√ß√µes definidas no arquivo `schema.prisma`

5. Popule o banco de dados com dados iniciais:
   ```bash
   npm run seed
   ```
   > Esta etapa criar√° registros b√°sicos necess√°rios para testar a aplica√ß√£o

6. Inicie o ambiente de desenvolvimento:
   ```bash
   npm run dev
   ```
   > O servidor ser√° iniciado em modo de desenvolvimento com hot-reload

7. Visualize o dashboard:
   ```
   http://localhost:3000
   ```
   > A p√°gina principal do dashboard ser√° carregada

8. Para acessar a √°rea restrita:
   ```
   http://localhost:3000/login
   ```
   > Utilize as credenciais definidas no arquivo 

.env

:
   > - Email: user@nextmail.com
   > - Senha: 123456

üìù **Observa√ß√£o**: Certifique-se de que todas as vari√°veis de ambiente estejam configuradas corretamente no arquivo 
.env antes de iniciar a aplica√ß√£o.


## Configura√ß√µes do Firebase

Usando as configura√ß√µes do Firebase da Betinha, tanto o Data Studio quanto o par√¢metro din√¢mico utilizado devem ser `/betinha1731`.

   ```
   http://localhost:3000/dashboard/betinha1731
   ```


## üíª Funcionalidades Principais


## üîß Como Contribuir

1. Fa√ßa um **fork** do reposit√≥rio.
2. Crie uma nova branch:  
   `git checkout -b minha-nova-rota`
3. Fa√ßa suas altera√ß√µes e comite:  
   `git commit -am 'Adiciona nova funcionalidade'`
4. Envie as altera√ß√µes para o seu reposit√≥rio remoto:  
   `git push origin minha-nova-rota`
5. Abra um **pull request** explicando as modifica√ß√µes realizadas.

## üìù CHECKLIST:

[Checklist](docs\CHECKLIST.MD)

## üìù Autor

- **Betinha Devs**
- **jvras**

## üìú Licen√ßa

Este projeto ainda n√£o possui licen√ßa definida.

## üìñ Documenta√ß√£o

[Next.js 14](https://nextjs.org/docs/14/getting-started)

[Next.js caching](https://nextjs.org/docs/app/building-your-application/caching)

[FireBase](https://firebase.google.com/docs)

[FireStore](https://firebase.google.com/docs/firestore)

[Server Actions](https://react.dev/reference/rsc/server-actions)

[UseQuery](https://tanstack.com/query/latest/docs/framework/react/reference/useQuery)

[Google Api](https://theoephraim.github.io/node-google-spreadsheet/#/)

